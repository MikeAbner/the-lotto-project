.blog-comments.widget.rounded-corners
  - @posts.each do |p|
    .blog-post
      .header
        .title
          %h4
            = p.title
          .menu
        %br.cb
      .text
        - p.comments.each do |c|
          - form_for c do |f|
            = f.hidden_field :blog_post_id
            %p
              = f.label :user_id
              %b
                - if c.user.nil?
                  = "Guest"
                - else
                  - if !c.user.nickname.blank?
                    = c.user.nickname
                  - else
                    = c.user.email
            %p
              = f.label :content
              %b
                =h c.content
            %p
              - if c.approved
                = f.submit 'Unapprove'
              - else
                = f.submit 'Approve'
              = link_to 'Delete', c, :confirm => 'Are you sure you want to delete this comment?', :method => :delete
        %hr